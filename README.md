小米路由器青春版刷机

## 缘起

小米路由器青春版的轻便性，适合出差的人群。从性能来看，应该有更好的选择，但是它的可玩性才是我最看重的。此教学仅仅作为个人笔记使用。

## 准备

* 小米路由器青春版（R1CL)
* 笔记本
* 网线
* 刷机软件 - [压缩包下载](./Mi_Router_R1CL_ROM.zip)

## 开始

**请注意：刷机后原厂保固将失效**

### 步骤1. 恢复原厂设定 - 输入开发版本ROM

笔记本连接小米路由器青春版wifi，浏览器网址输入192.168.31.1登录后，选择升级系统，手动升级，选择刷机软件 - miwifi_r1cl_all_59371_2.1.26.bin，刷入。

### 步骤2. 修改SSH密码
	
登录后台后，浏览器的网址应该长得如下：

```
http://192.168.31.1/cgi-bin/luci/;stok=075a9192918557c27cdde12e2175281d9 ***/web/home#router***

# 将/web/home#router替换为：

http://192.168.31.1/cgi-bin/luci/;stok=075a9192918557c27cdde12e2175281d9/api/xqsystem/set_name_password?oldPwd=当前路由的密码&newPwd=admin
```
修改成功后，网页会显示： {“code”:0}

### 步骤3. 备份路由器设置（使用Mac OS当做范例，非必要步骤）

```
# SSH接入路由器，会要求输入密码：admin

ssh admin@192.168.31.1

# 切换到路由器设定目录，备份档案

cat /proc/mtd
dd if=/dev/mtd0 of=//tmp/all.bin

# 登出路由器

exit

# 本地端复制路由器备份档案到桌面

cd ~/Desktop
scp -r -P 22 root@192.168.31.1:/tmp/all.bin all.bin

```

### 步骤4. 刷入Breed固件

```
# 将本地桌面的breed.bin文件，上传到路由器

cd ~/Desktop
scp -r ./breed.bin root@192.168.31.1:/tmp/breed.bin

# SSH接入路由器，会要求输入密码：admin

ssh admin@192.168.31.1

# 执行刷机

mtd -r write /tmp/breed.bin Bootloader

# 注意，这边会显示Rebooting...等待3分钟都不要进行任何操作

```

### 步骤5. 刷入华硕固件

等待3分钟后，拔掉路由器电源，将准备的网线一端接入路由去的WLAN，一端接入笔记本的网络接口，用取卡针长按路由器的Reset（在路由器背面右上角）同时插入电源10秒钟，松开。

在浏览器输入192.168.1.1后，选择“固件更新”，勾选固件，选择刷机软件 - MI-NANO_3.4.3.9-099.trx，上传刷入华硕固件并等待5分钟后重启。

注意：如果你的网络环境较为复杂，请务必使用网线，已知192.168.1.1，是大部分网络提供商的预设设定页面，可能会有冲突。

### 步骤6. 后台设定

路由器状态灯显示蓝色，代表已经恢复正常。此时将网线一端接入WLAN一端接入光猫（或是其他来源设备），拔掉电源，重新开机一次。

连接WIFI：PCND，密码：1234567890后，浏览器输入192.168.123.1，密码：admin进入后台设定。

后台设定就不一一介绍了。

## 赞赏

如果你觉得我的教学有用的话，欢迎使用微信赞赏。您的支持，是我最大的鼓励。

![赞赏](./reward.jpg)


